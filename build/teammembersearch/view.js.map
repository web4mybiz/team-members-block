{"version":3,"file":"teammembersearch/view.js","mappings":";;;;AAAA,MAAMA,eAAe,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,uBAAuB,CAAC;AAE1EF,eAAe,CAACG,OAAO,CAAEC,OAAO,IAAK;EACpC,MAAMC,WAAW,GAAGD,OAAO,CAACE,aAAa,CAAC,OAAO,CAAC;EAClD,IAAIC,aAAa;EAEjBF,WAAW,CAACG,gBAAgB,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE;IAClD,MAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAACE,IAAI,CAAC,CAAC;IAEnCC,YAAY,CAACN,aAAa,CAAC;IAE3B,IAAIG,KAAK,CAACI,MAAM,GAAG,CAAC,EAAE;MACrBV,OAAO,CAACE,aAAa,CAAC,UAAU,CAAC,CAACS,SAAS,GAAG,EAAE;MAChD;IACD;IAEAR,aAAa,GAAGS,UAAU,CAAC,MAAM;MAChCC,aAAa,CAACP,KAAK,CAAC;IACrB,CAAC,EAAE,GAAG,CAAC;IAEP,eAAeO,aAAaA,CAACC,KAAK,EAAE;MACnC,IAAI;QACH,MAAMC,YAAY,GAAGC,kBAAkB,CAACF,KAAK,CAAC;QAC9C,MAAMG,MAAM,GAAG,qCAAqCF,YAAY,EAAE;QAElE,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACF,MAAM,CAAC;QACpC,MAAMG,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAErC,IAAID,OAAO,CAACV,MAAM,EAAE;UACnB,MAAMY,IAAI,GAAG,MAAMC,WAAW,CAACH,OAAO,CAAC;UACvCpB,OAAO,CAACE,aAAa,CAAC,UAAU,CAAC,CAACS,SAAS,GAAGW,IAAI;QACnD,CAAC,MAAM;UACNtB,OAAO,CAACE,aAAa,CAAC,UAAU,CAAC,CAACS,SAAS,GAAG,iDAAiD;QAChG;MACD,CAAC,CAAC,OAAOa,KAAK,EAAE;QACfC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpDxB,OAAO,CAACE,aAAa,CAAC,UAAU,CAAC,CAACS,SAAS,GAAG,gDAAgD;MAC/F;IACD;EACD,CAAC,CAAC;AACH,CAAC,CAAC;AAEF,eAAeY,WAAWA,CAACH,OAAO,EAAE;EACnC,MAAMM,KAAK,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC9BR,OAAO,CAACS,GAAG,CAAC,MAAOC,IAAI,IAAK;IAC3B,MAAMC,WAAW,GAAG,MAAMC,WAAW,CAACF,IAAI,CAACG,cAAc,CAAC;IAC1D,OAAO;AACV;AACA,gBAAgBH,IAAI,CAACI,IAAI;AACzB,6BAA6BH,WAAW,UAAUD,IAAI,CAACK,KAAK,CAACC,QAAQ;AACrE,cAAcN,IAAI,CAACK,KAAK,CAACC,QAAQ;AACjC;AACA;AACA,IAAI;EACF,CAAC,CACF,CAAC;EAED,OAAOV,KAAK,CAACW,IAAI,CAAC,EAAE,CAAC;AACtB;AAEA,eAAeL,WAAWA,CAACM,OAAO,EAAE;EACnC,IAAI,CAACA,OAAO,EAAE,OAAO,EAAE;EACvB,IAAI;IACH,MAAMC,GAAG,GAAG,MAAMpB,KAAK,CAAC,wBAAwBmB,OAAO,EAAE,CAAC;IAC1D,MAAME,IAAI,GAAG,MAAMD,GAAG,CAAClB,IAAI,CAAC,CAAC;IAC7B,OAAOmB,IAAI,CAACC,UAAU,IAAI,EAAE;EAC7B,CAAC,CAAC,OAAOjB,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC9C,OAAO,EAAE;EACV;AACD,C","sources":["webpack://teammemberblock/./src/teammembersearch/view.js"],"sourcesContent":["const allSearchFields = document.querySelectorAll('.members-search-input');\n\nallSearchFields.forEach((element) => {\n\tconst searchInput = element.querySelector('input');\n\tlet debounceTimer;\n\n\tsearchInput.addEventListener('input', function (e) {\n\t\tconst value = e.target.value.trim();\n\n\t\tclearTimeout(debounceTimer);\n\n\t\tif (value.length < 3) {\n\t\t\telement.querySelector('.results').innerHTML = '';\n\t\t\treturn;\n\t\t}\n\n\t\tdebounceTimer = setTimeout(() => {\n\t\t\tperformSearch(value);\n\t\t}, 300);\n\n\t\tasync function performSearch(query) {\n\t\t\ttry {\n\t\t\t\tconst encodedQuery = encodeURIComponent(query);\n\t\t\t\tconst apiUrl = `/wp-json/wp/v2/team_member?search=${encodedQuery}`;\n\t\t\t\t\n\t\t\t\tconst response = await fetch(apiUrl);\n\t\t\t\tconst results = await response.json();\n\n\t\t\t\tif (results.length) {\n\t\t\t\t\tconst html = await showResults(results);\n\t\t\t\t\telement.querySelector('.results').innerHTML = html;\n\t\t\t\t} else {\n\t\t\t\t\telement.querySelector('.results').innerHTML = '<div class=\"error\">No team members found.</div>';\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching team members:', error);\n\t\t\t\telement.querySelector('.results').innerHTML = '<div class=\"error\">Something went wrong.</div>';\n\t\t\t}\n\t\t}\n\t});\n});\n\nasync function showResults(results) {\n\tconst items = await Promise.all(\n\t\tresults.map(async (item) => {\n\t\t\tconst memberImage = await getImageUrl(item.featured_media);\n\t\t\treturn `\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<a href=\"${item.link}\">\n\t\t\t\t\t\t<img width=\"48\" src=\"${memberImage}\" alt=\"${item.title.rendered}\" />\n\t\t\t\t\t\t<span>${item.title.rendered}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t})\n\t);\n\n\treturn items.join('');\n}\n\nasync function getImageUrl(mediaId) {\n\tif (!mediaId) return '';\n\ttry {\n\t\tconst res = await fetch(`/wp-json/wp/v2/media/${mediaId}`);\n\t\tconst data = await res.json();\n\t\treturn data.source_url || '';\n\t} catch (error) {\n\t\tconsole.error('Failed to fetch image:', error);\n\t\treturn '';\n\t}\n}\n"],"names":["allSearchFields","document","querySelectorAll","forEach","element","searchInput","querySelector","debounceTimer","addEventListener","e","value","target","trim","clearTimeout","length","innerHTML","setTimeout","performSearch","query","encodedQuery","encodeURIComponent","apiUrl","response","fetch","results","json","html","showResults","error","console","items","Promise","all","map","item","memberImage","getImageUrl","featured_media","link","title","rendered","join","mediaId","res","data","source_url"],"sourceRoot":""}